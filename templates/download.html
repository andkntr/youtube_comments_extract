{% extends "base.html" %}
{% block title %}YouTube動画ダウンロードツール（無料・高画質対応） 1080p / 720p{% endblock %}

{% block content %}
<div class="container py-5">

  <!-- ページタイトル -->
  <h1 class="text-center mb-4">YouTube動画ダウンロードツール（無料・高画質対応）</h1>
  <p class="text-center text-muted mb-5 lead">
    無料で使えるシンプルなYouTube動画ダウンロードツールです。<br>
    映像＋音声、映像のみ、音声のみを選択して、1080p・720pの高画質動画をスマホやPCに保存できます。
  </p>

  <!-- URL入力フォーム -->
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 col-md-10">
      <div class="card shadow-sm border-0 rounded-3">
        <div class="card-body p-4">
          <h2 class="h5 text-center mb-3">🔗 ダウンロードしたいYouTube動画のURLを入力</h2>
          <form method="POST" action="/download">
            <div class="input-group input-group-lg">
              <input type="text" class="form-control" name="url"
                     placeholder="例: https://www.youtube.com/watch?v=XXXXX" required>
              <button class="btn btn-primary" type="submit">ダウンロードを開始する</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% if formats %}
  <!-- フォーマット一覧 -->
  <h2 class="h4 mb-4">利用可能なダウンロードフォーマット</h2>
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th scope="col">タイプ</th>
          <th scope="col">解像度</th>
          <th scope="col">サイズ (MB)</th>
          <th scope="col">操作</th>
        </tr>
      </thead>
      <tbody>
        {% for f in formats %}
        <tr>
          <!-- タイプ -->
          <td>
            {% if f["タイプ"] == "映像＋音声" %}
              <span class="badge bg-success">{{ f["タイプ"] }}</span>
            {% elif f["タイプ"] == "映像のみ" %}
              <span class="badge bg-info text-dark">{{ f["タイプ"] }}</span>
            {% else %}
              <span class="badge bg-secondary">{{ f["タイプ"] }}</span>
            {% endif %}
          </td>

          <!-- 解像度 -->
          <td>{{ f["解像度"] }}</td>

          <!-- サイズ -->
          <td>{{ f["サイズ(MB)"] }}</td>

          <!-- ダウンロードボタン -->
          <td>
            <form method="POST" action="/download-video" class="d-inline">
              <input type="hidden" name="url" value="{{ url }}">
              <input type="hidden" name="format_code" value="{{ f.download_code }}">
              <input type="hidden" name="file_type" value="{{ f.タイプ }}">
              <button class="btn btn-outline-success btn-sm" type="submit">
                ⬇ ダウンロード
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}

  <!-- 使い方 -->
<section class="mt-5">
  <h2 class="h4 mb-4 text-center fw-bold">ご利用方法</h2>
  <div class="row text-center g-4">
    <div class="col-md-4">
      <div class="p-4 bg-light rounded shadow-sm h-100">
        <div class="display-6 text-primary mb-2">1</div>
        <p class="mb-0">YouTube動画のURLをコピーしてフォームに貼り付けます</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-4 bg-light rounded shadow-sm h-100">
        <div class="display-6 text-primary mb-2">2</div>
        <p class="mb-0">利用可能なフォーマットから希望の解像度を選択します</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-4 bg-light rounded shadow-sm h-100">
        <div class="display-6 text-primary mb-2">3</div>
        <p class="mb-0">「ダウンロード」をクリックして動画を保存します</p>
      </div>
    </div>
  </div>
  <p class="text-muted small mt-3 text-center">
    ※ ご利用は個人利用の範囲で行い、著作権法を遵守してください。
  </p>
</section>

<!-- 特徴 -->
<section class="mt-5">
  <h2 class="h4 mb-4 text-center fw-bold">本ツールの特徴</h2>
  <div class="row g-3">
    <div class="col-md-6">
      <div class="p-3 border rounded shadow-sm bg-white d-flex align-items-center">
        <span class="badge bg-success me-3">✔</span>
        <span>高画質 1080p / 720p の動画を保存可能</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="p-3 border rounded shadow-sm bg-white d-flex align-items-center">
        <span class="badge bg-success me-3">✔</span>
        <span>映像＋音声、映像のみ、音声のみを選べる</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="p-3 border rounded shadow-sm bg-white d-flex align-items-center">
        <span class="badge bg-success me-3">✔</span>
        <span>事前にファイルサイズを確認できる安心設計</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="p-3 border rounded shadow-sm bg-white d-flex align-items-center">
        <span class="badge bg-success me-3">✔</span>
        <span>スマホ・PC 両方に対応</span>
      </div>
    </div>
  </div>
</section>




</div>
{% endblock %}
